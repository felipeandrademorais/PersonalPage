(function() {
    tinymce.PluginManager.add('ssh_code_button', function( ed, url ) {
		ed.addCommand('ssh_code', function() {
			var selected_text = ed.selection.getContent();
			var return_text = '';
			return_text = '<pre><code>' + selected_text + '</code></pre>';
			ed.execCommand('mceInsertContent', 0, return_text);
		});
        ed.addButton( 'ssh_code_button', {
			text: '<ssh>',
            title: 'Simple Syntax Highlighting',
            icon: false,
			cmd : 'ssh_code'
        });
    });
})();